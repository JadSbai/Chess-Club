{% extends 'base_content.html' %}
{% block body %}
    {% include 'partials/navbar.html' with request=request %}
    {% include 'partials/second_navbar.html' with request=request club=club %}
    {% include 'partials/messages.html' %}
{% block content %}
<div class="container fluid">
  <div class="container d-flex justify-content-center">
    <div class="container-fluid content">

      <h1 class="mb-3 mt-2">{{ club.name }}</h1>
      <div class="border">

        <h5 class="mb-1 p-2 " style="background-color: rgba(0,0,0,.03); border-bottom: 1px solid rgba(0,0,0,.125);">Description</h5>
        <p class="p-2 text-break" style="text-align: justify;">{{ club.description }}</p>

        <h5 class="mb-1 p-2" style="background-color: rgba(0,0,0,.03); border-bottom: 1px solid rgba(0,0,0,.125);">Location</h5>
        <p class="p-2">{{ club.location }}</p>

        <h5 class="mb-1 p-2" style="background-color: rgba(0,0,0,.03); border-bottom: 1px solid rgba(0,0,0,.125);">Statistics</h5>
        <p class="p-2">Number of members: {{ club.member_count }}</p>

        <div class="row">
          <div class="col-6">
            <h5 class="mb-1 p-2" style="background-color: rgba(0,0,0,.03); border-bottom: 1px solid rgba(0,0,0,.125);">Club Owner</h5>
            <h6 class="text-muted" style="text-align: center;">{{ club.get_club_owner.full_name }}</h6>
            <div class="d-flex justify-content-center"><img src="{{ club.get_club_owner.gravatar }}" alt="Gravatar of {{ club.get_club_owner.full_name }}" class="rounded-circle" style="box-shadow: 1px 3px 6px #888888;"/></div>
            <p class="p-2 text-break" style="text-align: justify; text-align-last: center;">{{ club.get_club_owner.bio }}</p>
          </div>
          <div class="col-6">
            <h5 class="mb-2 p-2" style="background-color: rgba(0,0,0,.03); border-bottom: 1px solid rgba(0,0,0,.125);">Controls</h5>
            <p class="">
              {% if user_status != 'authenticated_non_member_user'  %}
              <h6 style="text-align: center;">In this club, your current status is: <strong>{{ user_status }}</strong>.</h6>
              {% else %}
              <div class="d-flex justify-content-center mb-2">
                  <a href="{% url 'apply_club' club_name=club.name %}" class="btn btn-outline-success">Apply to this club</a>
              </div>
              {%endif%}
              {% if user_status == 'officer' or user_status == 'owner' %}
                  <div class="d-flex justify-content-center mb-2">
                      <a href="{% url 'create_tournament' club_name=club.name %}" class="btn btn-outline-dark">Create a new tournament</a>
                  </div>
              {% endif %}
              {% if user_status == 'owner' %}
                  <div class="d-flex justify-content-center mb-2">
                      <a href="#" class="btn btn-outline-dark">Edit club info</a>
                  </div>
              {% endif %}
              {% if user_status == 'officer' or user_status == 'member' %}
                  <div class="d-flex justify-content-center mb-2">
                      <a href="{% url 'leave' club_name=club.name %}"  class="btn btn-outline-danger" onclick="return leaveConfirmation()">Leave this club</a>
                  </div>
                {% endif %}
            </p>
          </div>
      </div>

        <h5 class="mb-1 p-2" style="background-color: rgba(0,0,0,.03); border-bottom: 1px solid rgba(0,0,0,.125);">Tournaments</h5>
        {% if tournaments %}
        <table class="table">
          <tr><th>Name</th><th>Deadline</th></tr>
          {% for tournament in tournaments %}
          <tr>
            <td><a class = "btn btn-outline-primary" href="{% url 'show_tournament' tournament_name=tournament.name club_name=club.name%}">{{ tournament.name }}</a></td>
            <td>{{ tournament.deadline }}</td>
          </tr>
          {% endfor%}
        </table>
        {% else %}
        <p class="p-2" style="text-align: center;">So far, this club has not organised any tournaments.</p>
        {% endif %}

      </div>
    </div>
  </div>
</div>
{% endblock %}
{% endblock %}
